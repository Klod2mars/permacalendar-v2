meta:
  project_name: IAMcoder
  description: "Re-apply insetPadding after return AlertDialog (helper decodes \\n -> newline)"
  version: "1.0"

context:
  mode: write_enabled

tasks:
  - name: reapply_insetpadding_dryrun
    goal: "Dry-run: detect insertion point with regex (no write)"
    task_type: yaml_apply
    parameters:
      instructions:
        replacements:
          - file: "lib/features/planting/presentation/dialogs/create_planting_dialog.dart"
            anchor_pattern: "^\\s*return AlertDialog\\("
            anchor_regex: true
            multiline: true
            # note: we put literal backslash-n sequences; helpers._resolve_placeholders + _stringify_content
            # will be applied and unicode_escape decoding will turn "\\n" into a real newline.
            after: "\\n  insetPadding: EdgeInsets.only(\\n    left: 24.0,\\n    right: 24.0,\\n    top: 24.0,\\n    bottom: MediaQuery.of(context).viewInsets.bottom + 24.0,\\n  ),"
            include_anchor: true
            replace_all: false
      dry_run: true
      create_backup: false
      output: "reports/last_report.json"

  - name: reapply_insetpadding_live
    goal: "Live: insert insetPadding after return AlertDialog and create backup"
    task_type: yaml_apply
    parameters:
      instructions:
        replacements:
          - file: "lib/features/planting/presentation/dialogs/create_planting_dialog.dart"
            anchor_pattern: "^\\s*return AlertDialog\\("
            anchor_regex: true
            multiline: true
            after: "\\n  insetPadding: EdgeInsets.only(\\n    left: 24.0,\\n    right: 24.0,\\n    top: 24.0,\\n    bottom: MediaQuery.of(context).viewInsets.bottom + 24.0,\\n  ),"
            include_anchor: true
            replace_all: false
      dry_run: false
      create_backup: true
      output: "reports/last_report.json"
