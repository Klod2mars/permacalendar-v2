# 4-Migration-Notifier.yaml
objectif: "Migrer tous les StateNotifier/StateNotifierProvider vers Notifier/AsyncNotifier et NotifierProvider/AsyncNotifierProvider (Riverpod 3)."
pattern_migration:
  - avant: "class X extends StateNotifier<S> { X():super(init); ... }"
    apres: |
      class X extends Notifier<S> {
        @override
        S build() => init;
        ...
      }
  - provider_avant: "final xProvider = StateNotifierProvider<X, S>((ref) => X());"
    provider_apres: "final xProvider = NotifierProvider<X, S>(X.new);"
taches:
  - "Lister les occurrences: rg -n \"extends\\s+StateNotifier<|StateNotifierProvider<\" lib"
  - "Migrer chaque fichier selon pattern."
  - "Si async: basculer vers AsyncNotifier/AsyncValue."
commandes:
  - "rg -n \"extends\\s+StateNotifier<|StateNotifierProvider<\" lib | tee .cursor/notifier_hits.txt"
  - "## (Editer chaque fichier détecté : classe + provider + build())"
  - "dart run build_runner build --delete-conflicting-outputs"
criteres_acceptation:
  - "Aucune référence restante à StateNotifier/StateNotifierProvider."
  - "Compilation OK (build_runner + analyzer)."
livrables:
  - ".cursor/notifier_hits.txt"
  - ".cursor/build_gen_step4.log"
garde_fous:
  - "Ne modifier aucune logique Hive (read/write/adapters)."
next_step: "5-Fixers-Cascade"
